{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{getAppConfig}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileProgress(props){const[name,setName]=useState('');const navigate=useNavigate();const[all,setAll]=useState(0);const[today,setToday]=useState(0);const[graphic,setGrapic]=useState([]);const[primary,setPrimary]=useState(0);const[devices,setDeivice]=useState([]);const[b,setB]=useState(false);const link=getAppConfig().REACT_APP_API_URI;useEffect(()=>{OnReload();},[]);const OnReload=async()=>{try{const res=await axios.get(link,{'params':{'profileReload':true},withCredentials:true});const data=res.data;if(data['status']&&data['status']===200){if(!data['profile']){navigate('/');}else{setName(data['profile']['username']);setAll(data['allCompletedTasks']);setToday(data['todayCompletedTasks']);setGrapic(data['graphic']);if(data['primary']){handleSession(data['primary']);setPrimary(1);handleActive();}}}}catch(error){console.error(error);}};function handleActive(){const ps=document.querySelectorAll('.userLog_h');ps.forEach(element=>{element.classList.remove('active_p');if(sessionStorage.getItem('printD')){element.getAttribute('data-b');if(element.getAttribute('data-b')===sessionStorage.getItem('printD')){element.classList.add('active_p');}}});}function handleSession(data){if(sessionStorage.getItem('printD')){const s=sessionStorage.getItem('printD');if(s==='true'){setDeivice(data['blocked']);}else{setDeivice(data['notBlocked']);}}else{sessionStorage.setItem('printD',false);}setB(sessionStorage.getItem('printD'));handleActive();}const hadleLogout=async()=>{await axios.delete(link,{'data':{logout:true},withCredentials:true});navigate('/');};const handleUserLogs=e=>{sessionStorage.setItem('printD',e.target.getAttribute('data-b'));OnReload();};const handleBlockUnblock=async e=>{const id=e.target.getAttribute('data-id');let block=e.target.getAttribute('data-block');if(block==='true'){block=true;}else{block=false;}await axios.put(link,{id,block,'blockDevice':true},{withCredentials:true});OnReload();};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid pb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header container d-flex justify-content-start align-items-center flex-wrap gap-5 pb-5\",children:[/*#__PURE__*/_jsx(\"h5\",{children:name}),/*#__PURE__*/_jsx(\"button\",{onClick:hadleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex justify-content-start align-items-start flex-wrap gap-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"doneTask-box d-flex justify-content-start align-items-start gap-3 flex-row flex-md-column pe-0 pe-md-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"doneTasks d-flex justify-content-center gap-2 align-items-center flex-column\",children:[/*#__PURE__*/_jsx(\"h4\",{children:today}),/*#__PURE__*/_jsx(\"p\",{children:\"Today's Completed tasks\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"doneTasks d-flex justify-content-center gap-2 align-items-center flex-column\",children:[/*#__PURE__*/_jsx(\"h4\",{children:all}),/*#__PURE__*/_jsx(\"p\",{children:\"All time Completed tasks\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-start align-items-start gap-3 flex-column graphic-area\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Completed tasks of last 7 days\"}),/*#__PURE__*/_jsx(\"div\",{className:\"graphic_box d-flex justify-content-start align-items-end gap-3 py-5\",children:Object.entries(graphic).map(_ref=>{let[date,count]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center align-items-center gap-3 flex-column graphic_candle_box\",children:[/*#__PURE__*/_jsx(\"p\",{children:count}),/*#__PURE__*/_jsx(\"div\",{style:{height:`${count*20}px`,maxHeight:'200px'},className:\"graphic_candle\"}),/*#__PURE__*/_jsx(\"span\",{children:date})]},date);})})]})]})]});}export default ProfileProgress;","map":{"version":3,"names":["axios","React","useEffect","useState","useNavigate","getAppConfig","jsx","_jsx","jsxs","_jsxs","ProfileProgress","props","name","setName","navigate","all","setAll","today","setToday","graphic","setGrapic","primary","setPrimary","devices","setDeivice","b","setB","link","REACT_APP_API_URI","OnReload","res","get","withCredentials","data","handleSession","handleActive","error","console","ps","document","querySelectorAll","forEach","element","classList","remove","sessionStorage","getItem","getAttribute","add","s","setItem","hadleLogout","delete","logout","handleUserLogs","e","target","handleBlockUnblock","id","block","put","className","children","onClick","Object","entries","map","_ref","date","count","style","height","maxHeight"],"sources":["C:/Users/elsas/GitHub-Projects/ToDoList/to_do_list/src/componets/ProfileProgress.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getAppConfig } from '../config';\r\n\r\nfunction ProfileProgress(props) {\r\n    const [name,setName] = useState('');\r\n    const navigate = useNavigate();\r\n    const [all,setAll] = useState(0);\r\n    const [today,setToday]= useState(0);\r\n    const [graphic,setGrapic] = useState([]);\r\n    const [primary,setPrimary] = useState(0)\r\n    const [devices,setDeivice] = useState([]);\r\n    const [b,setB] = useState(false)\r\n    const link = getAppConfig().REACT_APP_API_URI\r\n    useEffect(()=>{\r\n        OnReload();\r\n    },[])\r\n\r\n\r\n\r\n    const OnReload = async ()=>{\r\n        try{\r\n            const res = await axios.get(link,{\r\n                'params':{\r\n                    'profileReload':true\r\n                },\r\n                withCredentials:true\r\n            });\r\n            const data = res.data\r\n            if(data['status'] && data['status']===200){\r\n                if(!data['profile']){\r\n                    navigate('/');\r\n                    \r\n                }\r\n                else{\r\n                    setName(data['profile']['username'])\r\n                    setAll(data['allCompletedTasks'])\r\n                    setToday(data['todayCompletedTasks'])\r\n                    setGrapic(data['graphic']);\r\n                    if(data['primary']){\r\n                        handleSession(data['primary']);\r\n                        setPrimary(1);\r\n                        handleActive();\r\n\r\n                    }\r\n                  \r\n\r\n                }\r\n            }\r\n\r\n           \r\n\r\n        }catch(error){\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    function handleActive(){\r\n        const ps = document.querySelectorAll('.userLog_h')\r\n        ps.forEach((element)=>{\r\n            element.classList.remove('active_p');\r\n            if(sessionStorage.getItem('printD')){\r\n                element.getAttribute('data-b')\r\n                if(element.getAttribute('data-b')===sessionStorage.getItem('printD')){\r\n                    element.classList.add('active_p')\r\n                }\r\n            }\r\n          \r\n        })\r\n    }\r\n\r\n    function handleSession(data){\r\n        if(sessionStorage.getItem('printD')){\r\n           const s = sessionStorage.getItem('printD') \r\n           if(s==='true'){\r\n                setDeivice(data['blocked'])\r\n           }\r\n           else{\r\n                setDeivice(data['notBlocked'])\r\n           }\r\n        }\r\n        else{\r\n            sessionStorage.setItem('printD',false);\r\n        }\r\n\r\n        setB(sessionStorage.getItem('printD'))\r\n        handleActive()\r\n    }\r\n\r\n    const hadleLogout = async()=>{\r\n        await axios.delete(link,{\r\n            'data':{\r\n                logout:true\r\n            },\r\n            withCredentials:true\r\n        });\r\n        navigate('/');\r\n        \r\n    }\r\n\r\n\r\n    const handleUserLogs = (e)=>{\r\n        sessionStorage.setItem('printD',e.target.getAttribute('data-b'))\r\n        OnReload()\r\n    }\r\n\r\n\r\n    const handleBlockUnblock = async(e)=>{\r\n        const id = e.target.getAttribute('data-id')\r\n        let block=  e.target.getAttribute('data-block')\r\n        if(block==='true'){\r\n            block = true;\r\n        }\r\n        else{\r\n            block = false\r\n        }\r\n       await axios.put(link,{\r\n            id,\r\n            block,\r\n            'blockDevice':true\r\n        },{withCredentials:true})\r\n        \r\n        OnReload();\r\n    }\r\n\r\n    return (\r\n        <div className='container-fluid pb-5'>\r\n            <div className='profile-header container d-flex justify-content-start align-items-center flex-wrap gap-5 pb-5'>\r\n                <h5>{name}</h5>\r\n                <button onClick={hadleLogout}>Logout</button>\r\n                \r\n            </div>\r\n            <div className='container d-flex justify-content-start align-items-start flex-wrap gap-5'>\r\n                <div className='doneTask-box d-flex justify-content-start align-items-start gap-3 flex-row flex-md-column pe-0 pe-md-5'> \r\n                    <div className='doneTasks d-flex justify-content-center gap-2 align-items-center flex-column'>\r\n                        <h4>{today}</h4>\r\n                        <p>Today's Completed tasks</p>\r\n                    </div>\r\n                    <div className='doneTasks d-flex justify-content-center gap-2 align-items-center flex-column'>\r\n                        <h4>{all}</h4>\r\n                        <p>All time Completed tasks</p>\r\n                    </div>\r\n                </div>\r\n\r\n                \r\n\r\n                <div className='d-flex justify-content-start align-items-start gap-3 flex-column graphic-area'>\r\n                    <h4>Completed tasks of last 7 days</h4>\r\n                        <div className='graphic_box d-flex justify-content-start align-items-end gap-3 py-5'>\r\n                            {Object.entries(graphic).map(([date,count])=>(\r\n                                <div key={date} className='d-flex justify-content-center align-items-center gap-3 flex-column graphic_candle_box'>\r\n                                    <p>{count}</p>\r\n                                    <div style={{height:`${count*20}px`, maxHeight:'200px'}} className='graphic_candle'></div>\r\n                                    <span>{date}</span>\r\n                                </div>\r\n                            ))\r\n                            \r\n                            }\r\n                        </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProfileProgress;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}