{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{getAppConfig}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CategoriesMain(props){const[data,setData]=useState([]);const link=getAppConfig().REACT_APP_API_URI;useEffect(()=>{getInfo();},[]);const getInfo=async()=>{try{const res=await axios.get(link,{'params':{'categories':true},withCredentials:true});setData(res.data);}catch(error){console.error(error);}};const handleDelete=async e=>{try{const res=await axios.delete(link,{'data':{'categorie':true,'id':e.target.getAttribute('data-id')},withCredentials:true});const data=res.data;if(data['error']){alert(data['error']);}else{getInfo();}}catch(error){console.error(error);}};const handleSubmit=async e=>{e.preventDefault();try{const category=document.getElementById('category_input').value;const res=await axios.post(link,{'addCategory':category},{withCredentials:true});const data=res.data;if(data['error']){alert(data['error']);}else{document.getElementById('category_input').value='';getInfo();}}catch(error){console.error(error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid  py-5\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"container add_category d-flex justify-content-start align-items-start flex-wrap gap-4 pb-5\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",maxLength:20,id:\"category_input\",placeholder:\"Add a category\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex justify-content-start align-items-start gap-3 flex-wrap\",children:data.map(element=>/*#__PURE__*/_jsxs(\"div\",{className:\"categorie_box d-flex justify-content-start align-items-center flex-column\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-100 text-end\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash delete\",\"aria-hidden\":\"true\",\"data-id\":element['id'],onClick:handleDelete})}),/*#__PURE__*/_jsx(\"h2\",{children:element['categorie']})]},element['id']))})]});}export default CategoriesMain;","map":{"version":3,"names":["React","useEffect","useState","axios","getAppConfig","jsx","_jsx","jsxs","_jsxs","CategoriesMain","props","data","setData","link","REACT_APP_API_URI","getInfo","res","get","withCredentials","error","console","handleDelete","e","delete","target","getAttribute","alert","handleSubmit","preventDefault","category","document","getElementById","value","post","className","children","onSubmit","type","maxLength","id","placeholder","map","element","onClick"],"sources":["C:/Users/elsas/GitHub-Projects/ToDoList/to_do_list/src/componets/CategoriesMain.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { getAppConfig } from '../config';\r\nfunction CategoriesMain(props) {\r\n    const [data,setData] = useState([]);\r\n    const link = getAppConfig().REACT_APP_API_URI\r\n    useEffect(()=>{\r\n        getInfo();\r\n    },[])\r\n\r\n    const getInfo = async ()=>{\r\n        try{\r\n            const res = await axios.get(link ,{\r\n                'params':{\r\n                    'categories':true\r\n                },\r\n                withCredentials:true\r\n            })\r\n            setData(res.data);\r\n        }\r\n        catch(error){\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n\r\n    const handleDelete = async(e)=>{\r\n        try{\r\n            const res = await axios.delete(link,{\r\n                'data':{\r\n                    'categorie':true,\r\n                    'id':e.target.getAttribute('data-id')\r\n                },\r\n                withCredentials:true\r\n            });\r\n            const data =res.data\r\n            if(data['error']){\r\n                alert(data['error'])\r\n            }\r\n            else{\r\n                getInfo();\r\n            }\r\n        }catch(error){\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async(e)=>{\r\n        e.preventDefault()\r\n\r\n        try{\r\n            const category = document.getElementById('category_input').value;\r\n            const res = await axios.post(link,\r\n                {'addCategory':category},\r\n                {withCredentials:true});\r\n            const data =  res.data;\r\n            if(data['error']){\r\n                alert(data['error'])\r\n            }\r\n            else{\r\n                document.getElementById('category_input').value=''\r\n                getInfo();\r\n            }\r\n\r\n        }catch(error){\r\n            console.error(error)\r\n        }\r\n    }\r\n    return (\r\n        <div className='container-fluid  py-5'>\r\n            <form onSubmit={handleSubmit} className='container add_category d-flex justify-content-start align-items-start flex-wrap gap-4 pb-5'>\r\n                <input type='text' maxLength={20} id='category_input' placeholder='Add a category'/>\r\n                <button type='submit'>Add</button>\r\n            </form>\r\n            <div className='container d-flex justify-content-start align-items-start gap-3 flex-wrap'>\r\n                \r\n                {data.map((element) => (\r\n                    \r\n                    <div  key={element['id']} className='categorie_box d-flex justify-content-start align-items-center flex-column'>\r\n                        <div className='w-100 text-end'>\r\n                            <i className=\"fa fa-trash delete\" aria-hidden=\"true\" data-id={element['id']} onClick={handleDelete}></i>\r\n                        </div>\r\n                        <h2>{element['categorie']}</h2>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            \r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CategoriesMain;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,YAAY,KAAQ,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACzC,QAAS,CAAAC,cAAcA,CAACC,KAAK,CAAE,CAC3B,KAAM,CAACC,IAAI,CAACC,OAAO,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACnC,KAAM,CAAAW,IAAI,CAAGT,YAAY,CAAC,CAAC,CAACU,iBAAiB,CAC7Cb,SAAS,CAAC,IAAI,CACVc,OAAO,CAAC,CAAC,CACb,CAAC,CAAC,EAAE,CAAC,CAEL,KAAM,CAAAA,OAAO,CAAG,KAAAA,CAAA,GAAU,CACtB,GAAG,CACC,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAb,KAAK,CAACc,GAAG,CAACJ,IAAI,CAAE,CAC9B,QAAQ,CAAC,CACL,YAAY,CAAC,IACjB,CAAC,CACDK,eAAe,CAAC,IACpB,CAAC,CAAC,CACFN,OAAO,CAACI,GAAG,CAACL,IAAI,CAAC,CACrB,CACA,MAAMQ,KAAK,CAAC,CACRC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACxB,CACJ,CAAC,CAGD,KAAM,CAAAE,YAAY,CAAG,KAAM,CAAAC,CAAC,EAAG,CAC3B,GAAG,CACC,KAAM,CAAAN,GAAG,CAAG,KAAM,CAAAb,KAAK,CAACoB,MAAM,CAACV,IAAI,CAAC,CAChC,MAAM,CAAC,CACH,WAAW,CAAC,IAAI,CAChB,IAAI,CAACS,CAAC,CAACE,MAAM,CAACC,YAAY,CAAC,SAAS,CACxC,CAAC,CACDP,eAAe,CAAC,IACpB,CAAC,CAAC,CACF,KAAM,CAAAP,IAAI,CAAEK,GAAG,CAACL,IAAI,CACpB,GAAGA,IAAI,CAAC,OAAO,CAAC,CAAC,CACbe,KAAK,CAACf,IAAI,CAAC,OAAO,CAAC,CAAC,CACxB,CAAC,IACG,CACAI,OAAO,CAAC,CAAC,CACb,CACJ,CAAC,MAAMI,KAAK,CAAC,CACTC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACxB,CACJ,CAAC,CAED,KAAM,CAAAQ,YAAY,CAAG,KAAM,CAAAL,CAAC,EAAG,CAC3BA,CAAC,CAACM,cAAc,CAAC,CAAC,CAElB,GAAG,CACC,KAAM,CAAAC,QAAQ,CAAGC,QAAQ,CAACC,cAAc,CAAC,gBAAgB,CAAC,CAACC,KAAK,CAChE,KAAM,CAAAhB,GAAG,CAAG,KAAM,CAAAb,KAAK,CAAC8B,IAAI,CAACpB,IAAI,CAC7B,CAAC,aAAa,CAACgB,QAAQ,CAAC,CACxB,CAACX,eAAe,CAAC,IAAI,CAAC,CAAC,CAC3B,KAAM,CAAAP,IAAI,CAAIK,GAAG,CAACL,IAAI,CACtB,GAAGA,IAAI,CAAC,OAAO,CAAC,CAAC,CACbe,KAAK,CAACf,IAAI,CAAC,OAAO,CAAC,CAAC,CACxB,CAAC,IACG,CACAmB,QAAQ,CAACC,cAAc,CAAC,gBAAgB,CAAC,CAACC,KAAK,CAAC,EAAE,CAClDjB,OAAO,CAAC,CAAC,CACb,CAEJ,CAAC,MAAMI,KAAK,CAAC,CACTC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACxB,CACJ,CAAC,CACD,mBACIX,KAAA,QAAK0B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eAClC3B,KAAA,SAAM4B,QAAQ,CAAET,YAAa,CAACO,SAAS,CAAC,4FAA4F,CAAAC,QAAA,eAChI7B,IAAA,UAAO+B,IAAI,CAAC,MAAM,CAACC,SAAS,CAAE,EAAG,CAACC,EAAE,CAAC,gBAAgB,CAACC,WAAW,CAAC,gBAAgB,CAAC,CAAC,cACpFlC,IAAA,WAAQ+B,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,KAAG,CAAQ,CAAC,EAChC,CAAC,cACP7B,IAAA,QAAK4B,SAAS,CAAC,0EAA0E,CAAAC,QAAA,CAEpFxB,IAAI,CAAC8B,GAAG,CAAEC,OAAO,eAEdlC,KAAA,QAA0B0B,SAAS,CAAC,2EAA2E,CAAAC,QAAA,eAC3G7B,IAAA,QAAK4B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC3B7B,IAAA,MAAG4B,SAAS,CAAC,oBAAoB,CAAC,cAAY,MAAM,CAAC,UAASQ,OAAO,CAAC,IAAI,CAAE,CAACC,OAAO,CAAEtB,YAAa,CAAI,CAAC,CACvG,CAAC,cACNf,IAAA,OAAA6B,QAAA,CAAKO,OAAO,CAAC,WAAW,CAAC,CAAK,CAAC,GAJxBA,OAAO,CAAC,IAAI,CAKlB,CACR,CAAC,CACD,CAAC,EAGL,CAAC,CAEd,CAEA,cAAe,CAAAjC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}